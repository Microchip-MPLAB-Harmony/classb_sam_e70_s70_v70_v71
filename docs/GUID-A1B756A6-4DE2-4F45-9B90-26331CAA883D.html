<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE11" /><meta name="copyright" content="(C) Copyright 2021" />
<meta name="DC.rights.owner" content="(C) Copyright 2021" />
<meta name="DC.type" content="topic" />
<meta name="DC.title" content="CLASSB_App_WDT_Recovery" />
<meta name="DC.relation" scheme="URI" content="GUID-85C09776-46F4-43A4-9FA5-26997226A3EA.html" />
<meta name="DC.format" content="XHTML" />
<meta name="DC.identifier" content="classb-app-wdt-recovery" />
<link rel="stylesheet" type="text/css" href="stylesheets/atmel.css" />
<title>CLASSB_App_WDT_Recovery</title>
<meta name="Microsoft.Help.Id" content="GUID-BE9FBDF4-5E64-4C2E-AC51-0D83255C3137-classb-app-wdt-recovery" />
<meta name="Microsoft.Help.TocParent" content="GUID-BE9FBDF4-5E64-4C2E-AC51-0D83255C3137" />
<meta name="Microsoft.Help.TocOrder" content="0" />
<meta name="Microsoft.Help.Locale" content="en-US" />
<meta name="Microsoft.Help.TopicLocale" content="en-US" />
<meta name="Microsoft.Help.DisplayVersion" content="MPLABÂ® Harmony Class B Library for SAM E70/S70/V70/V71 devices Reference A 12/2021" />
<script language="javascript">
       
       if (window.parent.location.protocol != 'file:') {
				document.addEventListener('click', function(e) {
				    if (e.target) {
               if (e.target.nodeName == "A" ) {
                    if (!e.target.target) {
                      e.preventDefault();
                      e.stopPropagation();
                              
                      var origUrl = window.parent.location.href.substr(0, window.parent.location.href.indexOf("?"));
                      if (origUrl.length === 0) {
                          origUrl = window.parent.location.href;
                      }
                      var href= e.target.getAttribute("href");
                      var parts = href.split("#");
          
                      var url = "";
                      if (parts.length == 2 ) {
                        if (!parts[0].length) {
                            url = window.parent.location.search.replace('?','')
                        } else {
                            url = parts[0].replace('.html','');
                        }
                      } else {
                        url = parts[0].replace('.html','');
                      }

                      if (parts.length == 2) {
                          url += "#" + parts[1];
                      }
    
                      window.parent.location.href = origUrl + "?" + url;

                      return false;
                    }
               }
            }
				});
			}

		</script><script language="javascript">
        function cpy(id, button) {
        
            var element = document.getElementById(id);
            var content = element.getAttribute("content");
            var textArea = document.createElement("textarea");
            
            // Place in the top-left corner of screen regardless of scroll position.
            textArea.style.position = 'fixed';
            textArea.style.top = 0;
            textArea.style.left = 0;
            
            // Ensure it has a small width and height. Setting to 1px / 1em
            // doesn't work as this gives a negative w/h on some browsers.
            textArea.style.width = '2em';
            textArea.style.height = '2em';
            
            // We don't need padding, reducing the size if it does flash render.
            textArea.style.padding = 0;
            
            // Clean up any borders.
            textArea.style.border = 'none';
            textArea.style.outline = 'none';
            textArea.style.boxShadow = 'none';
            
            // Avoid flash of the white box if rendered for any reason.
            textArea.style.background = 'transparent';
            
            
            textArea.value = content;
            
            document.body.appendChild(textArea);
            textArea.focus();
            textArea.select();
            
            try {
               var successful = document.execCommand('copy');
               var msg = successful ? 'successful' : 'unsuccessful';
               if (!button.classList.contains("copied")){
                  button.textContent = "Copied";
                  button.classList.add("copied");
                  setTimeout(function(){
                    button.textContent = "Copy";
                    button.classList.remove("copied");
                  },1000);
               }
            } catch (err) {
              console.log('Oops, unable to copy');
            }
            
            document.body.removeChild(textArea);
        }
      </script><script language="javascript">
          
          // Add the MathML namespace to html
          var html = document.getElementsByTagName("html")[0],
          head = document.getElementsByTagName("head")[0];
          
          var mathJax = document.createElement("script");
          mathJax.src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-MML-AM_CHTML";
          head.appendChild(mathJax);
          
          html.setAttribute("xmlns:m","http://www.w3.org/1998/Math/MathML");
          
          function inIframe() { try { return window.self !== window.top; } catch (e) { return true; } }
          
          if (!inIframe()) { 
          
          var Default = "index.html?GUID-A1B756A6-4DE2-4F45-9B90-26331CAA883D"; 
          
          var displaylocation = "value" + window.location.href;
          
          var GUIDS = displaylocation.split('GUID');          
          
          if (displaylocation.indexOf('#GUID') != -1) {            
          var First = GUIDS[1].split('.html');  
          if (GUIDS[3]){First = GUIDS[2].split('.html');}
          if (GUIDS[4]){First = GUIDS[3].split('.html');}
          if (GUIDS[5]){First = GUIDS[4].split('.html');}
          
          var Second = GUIDS[2].split('#');   
          if (GUIDS[3]){Second = GUIDS[3].split('#');}
          if (GUIDS[4]){Second = GUIDS[4].split('#');}
          if (GUIDS[5]){Second = GUIDS[5].split('#');}
          
          Default = "index.html?" + "GUID" + First[0] + "GUID" + Second[0];     
          }                    
          window.top.location = Default;
          }       
          
        </script><style xml:space="">
        
          button.copy-code{
            display:none;
            padding:0.7em 1.4em;
            margin:0 0.3em 0.3em 0;
            border-radius:0.15em;
            box-sizing: border-box;
            text-decoration:none;
            font-family:'Roboto',sans-serif;
            text-transform:uppercase;
            font-weight:400;
            color:#FFFFFF;
            background-color:#9c9c9c;
            box-shadow:inset 0 -0.6em 0 -0.35em rgba(0,0,0,0.17);
            text-align:center;
            position:relative;
            border: 0;
            float: right;
            border-radius: .5em;
            cursor: pointer;
          }
          button.copy-code:active{
            top:0.1em;
          }
          
          pre:hover button.copy-code{
            display: inline-block !important;
          }
          button.copy-code.copied {
            cursor: default !important;
          }
          
          
          @media all and (max-width:30em){
            button.copy-code{
              display:block;
              margin:0.4em auto;
            }
          }
        
        
      </style><link rel="stylesheet" type="text/css" href="stylesheets/common-extended.css" /></head>
<body id="classb-app-wdt-recovery">
<h1 class="title topictitle1" id="ariaid-title1">CLASSB_App_WDT_Recovery</h1><div class="body"><p class="p"><strong class="ph b">Function</strong></p>
<pre class="pre codeblock language-c"><button title="Copy Code" class="copy-code" onclick="cpy('d11038e13', this);">Copy</button><code id="d11038e13" content="static void CLASSB_App_WDT_Recovery(void);"><span class="ph token keyword">static</span> <span class="ph token keyword">void</span> <span class="ph token function">CLASSB_App_WDT_Recovery</span><span class="ph token punctuation">(</span><span class="ph token keyword">void</span><span class="ph token punctuation">)</span><span class="ph token punctuation">;</span></code></pre><p class="p"><strong class="ph b">Summary</strong></p>
<p class="p">This function is called if a WDT reset is caused during run-time.</p>
<p class="p"><strong class="ph b">Description</strong></p>
<p class="p">This function is used inside the CLASSB_Init() function. When the device comes back from a WDT reset,
if a WDT test by the Class B library has not been in progress, it is assumed that the WDT reset has
happened since the application failed to clear the WDT during regular intervals.
In this case, the CLASSB_App_WDT_Recovery() function is called from CLASSB_Init().</p>
<p class="p"><strong class="ph b">Precondition</strong></p>
<p class="p">None.</p>
<p class="p"><strong class="ph b">Parameters</strong></p>
<p class="p">None.</p>
<p class="p"><strong class="ph b">Returns</strong></p>
<p class="p">None.</p>
<p class="p"><strong class="ph b">Example</strong></p>
<pre class="pre codeblock language-c"><button title="Copy Code" class="copy-code" onclick="cpy('d11038e59', this);">Copy</button><code id="d11038e59" content="if ((RSTC_REGS-&gt;RSTC_RCAUSE &amp; RSTC_RCAUSE_WDT_Msk) == RSTC_RCAUSE_WDT_Msk)&#xA;{&#xA;    if (!(*wdt_test_in_progress == CLASSB_TEST_STARTED))&#xA;    {&#xA;        CLASSB_SST_WDT_Recovery();&#xA;    }&#xA;}"><span class="ph token keyword">if</span> <span class="ph token punctuation">(</span><span class="ph token punctuation">(</span>RSTC_REGS<span class="ph token operator">-&gt;</span>RSTC_RCAUSE <span class="ph token operator">&amp;</span> RSTC_RCAUSE_WDT_Msk<span class="ph token punctuation">)</span> <span class="ph token operator">==</span> RSTC_RCAUSE_WDT_Msk<span class="ph token punctuation">)</span>
<span class="ph token punctuation">{</span>
    <span class="ph token keyword">if</span> <span class="ph token punctuation">(</span><span class="ph token operator">!</span><span class="ph token punctuation">(</span><span class="ph token operator">*</span>wdt_test_in_progress <span class="ph token operator">==</span> CLASSB_TEST_STARTED<span class="ph token punctuation">)</span><span class="ph token punctuation">)</span>
    <span class="ph token punctuation">{</span>
        <span class="ph token function">CLASSB_SST_WDT_Recovery</span><span class="ph token punctuation">(</span><span class="ph token punctuation">)</span><span class="ph token punctuation">;</span>
    <span class="ph token punctuation">}</span>
<span class="ph token punctuation">}</span></code></pre><p class="p"><strong class="ph b">Remarks</strong></p>
<p class="p">This function is for the internal use of the Class B library.</p>
</div>
<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a class="link" href="GUID-85C09776-46F4-43A4-9FA5-26997226A3EA.html">MPLABÂ® Harmony Class B Library for SAM E70 S70 V70 V71 devices</a></div>
</div>
</div></body>
</html>